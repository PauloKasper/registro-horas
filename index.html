<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <!-- PWA + iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#007bff">
  <link rel="manifest" href="./assets/manifest.json">
  <link rel="apple-touch-icon" href="/icons/icon-192.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/icon-180.png">
  <link rel="apple-touch-startup-image" href="/splash.png">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <title>Registro de Horas</title>
</head>
<body>

<!-- LOGIN -->
<div id="tela-login" class="tela ativa">
  <h2>Acesso ao Sistema</h2>
  <input id="usuario" placeholder="Usuário (Nome)" autocomplete="username">
  <div class="input-wrap">
    <input id="senha" type="password" placeholder="Número do Colaborador" autocomplete="current-password">
    <button id="toggle-senha" class="eye-btn" aria-label="Mostrar senha">
      <svg id="icon-eye" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none">
        <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7z"/>
        <circle cx="12" cy="12" r="3"/>
      </svg>
    </button>
  </div>
  <div id="erro-login" class="erro"></div>
  <button id="btn-entrar">Entrar</button>
  <button id="btn-abrir-cadastro">Não possui conta? Registrar-se</button>
</div>

<!-- CADASTRO -->
<div id="tela-cadastro" class="tela">
  <div class="cadastro-card">
    <h2>Cadastro Inicial</h2>
    <input id="cad-colaborador" placeholder="Colaborador">
    <input id="cad-numero" placeholder="Número do Colaborador">
    <div id="erro-cadastro" class="erro"></div>
    <div class="botoes-lado-a-lado">
      <button id="btn-salvar-cadastro">Salvar e Continuar</button>
      <button id="btn-voltar-login">Voltar</button>
    </div>
  </div>
</div>

<!-- PERFIL -->
<div id="tela-perfil" class="tela">
  <div class="sticky-wrapper">
    <div class="perfil-card">

      <div class="perfil-topo">
        <div class="foto-container">
          <img src="URL_DA_SUA_FOTO.jpg" alt="" class="profile-pic" id="profile-image-display">
          <input type="file" id="file-input" accept="image/png, image/jpeg" style="display: none;">
        </div>
      </div>

      <div class="menu-foto-container">
        <button id="btn-gerir-foto" class="btn-perfil-acao">Editar</button>
        <div id="popup-opcoes-foto" class="popup-opcoes">
          <button id="btn-adicionar-nova-foto" class="opcao-foto">Adicionar/Mudar Foto</button>
          <button id="btn-remover-foto" class="opcao-foto remover">Remover Foto</button>
        </div>
      </div>

      <div class="perfil-info-text">
        <h2 id="nome-usuario-perfil">Paulo Silva</h2>
        <p class="cargo" id="cargo-usuario-perfil">cargo</p>
      </div>

    </div>

    <div class="cards-container">
      <div class="card">
        <div class="flip">
          <div id="dias-front" class="face front">Total Dias</div>
          <div id="horas-back" class="face back">Total Horas</div>
        </div>
      </div>

      <div class="card">
        <div class="flip">
          <div id="refeicao-front" class="face front">Refeição Total</div>
          <div id="estimativa-back" class="face back">Estimativa</div>
        </div>
      </div>
    </div>

    <div id="card-horas-resumo" class="card-resumo">
      <h3>Resumo de Horas</h3>
      <div class="resumo-item"><span>Total de Horas:</span> <strong id="total-horas">0h</strong></div>
      <div class="resumo-item"><span>Horas Extras:</span> <strong id="horas-extras">0h</strong></div>
      <div class="resumo-item"><span>Horas Negativas:</span> <strong id="horas-negativas">0h</strong></div>
    </div>

  </div>
</div>

<!-- REGISTRO (CALENDÁRIO) -->
<div id="tela-registro" class="tela">
    <!-- CABEÇALHO: MÊS + BOTÕES -->
  <div id="calendar-header">
    <button id="btn-mes-anterior">&lt;</button>
    <span id="month-year">Dezembro 2025</span>
    <button id="btn-proximo-mes">&gt;</button>
  </div>

  <!-- DIAS DA SEMANA -->
  <div id="weekdays">
    <div>Dom</div>
    <div>Seg</div>
    <div>Ter</div>
    <div>Qua</div>
    <div>Qui</div>
    <div>Sex</div>
    <div>Sab</div>
  </div>

  <div id="calendar"></div>
    <!-- Modal -->
  <div id="modal-horas" class="modal" aria-hidden="true">
      <div class="modal-content">
          <h2 id="modal-data"></h2>

        <label for="entrada">Entrada</label>
        <input id="entrada" type="text" inputmode="numeric" pattern="[0-9]*" maxlength="5" placeholder="hh:mm"
               oninput="this.value = formatarHora(this.value)">

        <label for="saidaAlmoco">Saída Almoço</label>
        <input id="saidaAlmoco" type="text" inputmode="numeric" pattern="[0-9]*" maxlength="5" placeholder="hh:mm"
               oninput="this.value = formatarHora(this.value)">

        <label for="retornoAlmoco">Retorno Almoço</label>
        <input id="retornoAlmoco" type="text" inputmode="numeric" pattern="[0-9]*" maxlength="5" placeholder="hh:mm"
               oninput="this.value = formatarHora(this.value)">

        <label for="saidaFinal">Saída Final</label>
        <input id="saidaFinal" type="text" inputmode="numeric" pattern="[0-9]*" maxlength="5" placeholder="hh:mm"
               oninput="this.value = formatarHora(this.value)">

          <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:8px;">
            <button id="salvar-horas">Salvar</button>
            <button id="fechar-modal" class="close-btn">Fechar</button>
          </div>
      </div>
  </div>

  <div class="botoes-lado-a-lado" style="margin-top:12px;">
    <button id="btn-gerar-csv">Exportar CSV</button>
  </div>

  <h2 id="usuario-logado" class="usuario-h2"></h2>
</div>

<!-- CONFIGURAÇÕES -->
<div id="tela-configurações" class="tela">
  <h2>Ajustes</h2>
  <div class="radio-inputs">
      <!-- Botão de exclusão -->
    <!-- Botão de exclusão na tela de configurações -->
    <button id="btn-excluir-usuario" class="danger-button">Excluir Conta</button>

    <!-- Modal de confirmação -->
    <div id="modal-excluir-usuario" class="modal">
      <div class="modal-content">
        <h2>Excluir Conta</h2>
        <p>⚠ ATENÇÃO! Esta ação é permanente e não pode ser desfeita.</p>
        <p>Digite sua senha para confirmar:</p>
        <input type="password" id="senha-excluir" placeholder="Senha">
        <div id="erro-excluir" class="alerta"></div>
        <div class="modal-buttons">
          <button id="cancelar-exclusao">Cancelar</button>
          <button id="confirmar-exclusao" disabled>Excluir Conta</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- BOTTOM NAV -->
<div id="bottom-nav" class="radio-inputs oculto">
  <label class="radio">
    <input type="radio" name="bottom-nav" checked>
    <span class="name">Perfil</span>
  </label>
  <label class="radio">
    <input type="radio" name="bottom-nav">
    <span class="name">Registrar Horas</span>
  </label>
  <label class="radio">
    <input type="radio" name="bottom-nav">
    <span class="name">Ajustes</span>
  </label>
  <label class="radio">
    <input type="radio" name="bottom-nav">
    <span class="name">Sair</span>
  </label>
</div>

<!-- POPUP -->
<div id="popup-ciclo" style="display:none;">
  <div class="popup-conteudo">
    <div id="popup-text"></div>
    <button id="popup-fechar">OK</button>
  </div>
</div>

<script src="script.js"></script>
</body>
</html>

